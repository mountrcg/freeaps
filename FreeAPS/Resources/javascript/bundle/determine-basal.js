var freeaps_determineBasal;(()=>{var e={5546:(e,r,a)=>{var t=a(6880);function o(e,r){r||(r=0);var a=Math.pow(10,r);return Math.round(e*a)/a}function n(e,r){return"mmol/L"===r.out_units?o(.0555*e,1):Math.round(e)}var i="",s="",l="",u="",d="",m="",c="",p="",b="",g="",f="",h="",v=1,B=1,_=1,M=1,S=1;function y(e,r,a){"bg"==a?(polyX=[50,60,80,90,100,110,150,180,200],polyY=[-.5,-.5,-.3,-.2,0,0,.5,.7,.7]):"delta"==a&&(polyX=[2,7,12,16,20],polyY=[0,0,.4,.7,.7]);var t=polyX.length-1,o=polyX[0],n=polyY[0],i=polyX[t],s=polyY[t],l=1,u=1,d=1,m=o;if(o>e)i=polyX[1],l=(u=n)+((s=polyY[1])-u)/(i-(d=o))*(e-d);else if(i<e)o=polyX[t-1],l=(u=n=polyY[t-1])+(s-u)/(i-(d=o))*(e-d);else for(var c=0;c<=t;c++){if(o=polyX[c],n=polyY[c],o==e){l=n;break}if(o>e){l=u+(n-u)/(o-(d=m))*(e-d);break}u=n,m=o}return l*="delta"==a?r.delta_ISFrange_weight:e>100?r.higher_ISFrange_weight:r.lower_ISFrange_weight}function x(e,r,a,t,n,i,s,l,u){console.error("check ratio "+o(e,2)+" against autoISF min: "+r+" and autoISF max: "+a),e<r?(g=" (lmtd.min)",p="weakest autoISF factor "+o(e,2)+" limited by autoISF_min "+r,console.error(p),e=r):e>a&&(g=" (lmtd.max)",p="strongest autoISF factor "+o(e,2)+" limited by autoISF_max "+a,console.error(p),e=a);var d=1;return s&&i.temptargetSet&&l>u?(d=e*t,n=" (exerciseMode)",console.error("autoISF adjusts sens "+t+", instead of profile.sens "+i.sens),f=n):e>=1?(d=Math.max(e,t),e>=t&&(n="")):(d=Math.min(e,t),e<=t&&(n="")),p="final ISF factor "+o(d,2)+n,console.error(p),d}e.exports=function(e,r,a,F,I,w,T,C,G,D,O,R,U,A){var P=0,k="",E="",j="",W="",q="",z=0,N=0,L=0,X=0,Y=0,H=0;const Z=A.tddYtd,$=A.tdd7d;function J(e,r){var a=e.getTime();return new Date(a+36e5*r)}function K(e){var r=F.bolus_increment;.025!=r&&(r=.05);var a=e/r;return a>=1?o(Math.floor(a)*r,5):0}function Q(e){function r(e){return e<10&&(e="0"+e),e}return r(e.getHours())+":"+r(e.getMinutes())+":00"}function V(e,r){var a=new Date("1/1/1999 "+e),t=new Date("1/1/1999 "+r);return(a.getTime()-t.getTime())/36e5}function ee(e,r){var a=0,t=r,o=(e-r)/36e5,n=0,i=o,s=0;do{if(o>0){var l=Q(t);U[0].rate;for(let e=0;e<U.length;e++){var u=U[e].start;if(l==u){if(e+1<U.length){o>=(s=V(U[e+1].start,U[e].start))?n=s:o<s&&(n=o)}else if(e+1==U.length){let r=U[0].start;o>=(s=24-V(U[e].start,r))?n=s:o<s&&(n=o)}a+=K(U[e].rate*n),o-=n,t=J(t,n)}else if(l>u)if(e+1<U.length){var d=U[e+1].start;l<d&&(o>=(s=V(d,l))?n=s:o<s&&(n=o),a+=K(U[e].rate*n),o-=n,t=J(t,n))}else if(e==U.length-1){o>=(s=V("23:59:59",l))?n=s:o<s&&(n=o),a+=K(U[e].rate*n),o-=n,t=J(t,n)}}}}while(o>0&&o<i);return a}if(O.length){let e=O.length-1;var re=new Date(O[e].timestamp),ae=new Date(O[0].timestamp);if("TempBasalDuration"==O[0]._type&&(ae=new Date),(P=(ae-re)/36e5)<23.9&&P>21)Y=ee(re,(te=24-P,oe=re.getTime(),new Date(oe-36e5*te))),W="24 hours of data is required for an accurate tdd calculation. Currently only "+P.toPrecision(3)+" hours of pump history data are available. Using your pump scheduled basals to fill in the missing hours. Scheduled basals added: "+Y.toPrecision(5)+" U. ";else P<21?(dynISFenabled=!1,enableDynamicCR=!1):W=""}else console.log("Pumphistory is empty!"),dynISFenabled=!1,enableDynamicCR=!1;var te,oe;for(let e=0;e<O.length;e++)"Bolus"==O[e]._type&&(X+=O[e].amount);for(let e=1;e<O.length;e++)if("TempBasal"==O[e]._type&&O[e].rate>0){z=e,H=O[e].rate;var ne=O[e-1]["duration (min)"]/60,ie=ne,se=new Date(O[e-1].timestamp),le=se;do{if(e--,0==e){le=new Date;break}if("TempBasal"==O[e]._type||"PumpSuspend"==O[e]._type){le=new Date(O[e].timestamp);break}}while(e>0);var ue=(le-se)/36e5;ue<ie&&(ne=ue),L+=K(H*ne),e=z}for(let e=0;e<O.length;e++)if(0,0==O[e]["duration (min)"]||"PumpResume"==O[e]._type){let r=new Date(O[e].timestamp),a=r,t=e;do{if(t>0&&(--t,"TempBasal"==O[t]._type)){a=new Date(O[t].timestamp);break}}while(t>0);(a-r)/36e5>0&&(Y+=ee(a,r))}for(let e=O.length-1;e>0;e--)if("TempBasalDuration"==O[e]._type){let r=O[e]["duration (min)"]/60,a=new Date(O[e].timestamp);var de=a;let t=e;do{if(--t,t>=0&&("TempBasal"==O[t]._type||"PumpSuspend"==O[t]._type)){de=new Date(O[t].timestamp);break}}while(t>0);if(0==e&&"TempBasalDuration"==O[0]._type&&(de=new Date,r=O[e]["duration (min)"]/60),(de-a)/36e5-r>0){Y+=ee(de,J(a,r))}}var me={TDD:o(N=X+L+Y,5),bolus:o(X,5),temp_basal:o(L,5),scheduled_basal:o(Y,5)},ce=N;P>21?(E=". Bolus insulin: "+X.toPrecision(5)+" U",j=". Temporary basal insulin: "+L.toPrecision(5)+" U",k=". Insulin with scheduled basal rate: "+Y.toPrecision(5)+" U",q=W+(" TDD past 24h is: "+N.toPrecision(5)+" U")+E+j+k,tddReason=", TDD, 24h: "+o(N,1)+", ytd: "+o(Z,1)+", 7d√ò: "+o($,1),console.error(q)):tddReason=", TDD: Not enough pumpData (< 21h)";var pe={},be=new Date;if(D&&(be=D),void 0===F||void 0===F.current_basal)return pe.error="Error: could not get current basal rate",pe;var ge=t(F.current_basal,F),fe=ge,he=new Date;D&&(he=D);var ve,Be=new Date(e.date),_e=o((he-Be)/60/1e3,1),Me=e.glucose,Se=e.noise;ve=n(e.delta,F);var ye=Math.min(e.delta,e.short_avgdelta),xe=Math.min(e.short_avgdelta,e.long_avgdelta),Fe=Math.max(e.delta,e.short_avgdelta,e.long_avgdelta);(Me<=10||38===Me||Se>=3)&&(pe.reason="CGM is calibrating, in ??? state, or noise is high");if(_e>12||_e<-5?pe.reason="If current system time "+he+" is correct, then BG data is too old. The last BG data was read "+_e+"m ago at "+Be:Me>60&&e.cgmFlatMinutes>44&&!isSaveCgmSource&&(e.last_cal&&e.last_cal<3?pe.reason="CGM was just calibrated":pe.reason="Error: CGM data was suspiciously flat for the past ~"+e.cgmFlatMinutes+"m"),Me<=10||38===Me||Se>=3||_e>12||_e<-5||Me>60&&e.cgmFlatMinutes>44&&!isSaveCgmSource)return r.rate>fe?(pe.reason+=". Replacing high temp basal of "+r.rate+" with neutral temp of "+fe,pe.deliverAt=be,pe.temp="absolute",pe.duration=30,pe.rate=fe,pe):0===r.rate&&r.duration>30?(pe.reason+=". Shortening "+r.duration+"m long zero temp to 30m. ",pe.deliverAt=be,pe.temp="absolute",pe.duration=30,pe.rate=0,pe):(pe.reason+=". Temp "+r.rate+" <= current basal "+o(fe,2)+"U/hr; doing nothing. ",pe);var Ie,we,Te,Ce,Ge=F.max_iob;if(void 0!==F.min_bg&&(we=F.min_bg),void 0!==F.max_bg&&(Te=F.max_bg),void 0!==F.enableSMB_high_bg_target&&(Ce=F.enableSMB_high_bg_target),void 0===F.min_bg||void 0===F.max_bg)return pe.error="Error: could not determine target_bg. ",pe;Ie=(F.min_bg+F.max_bg)/2;var De="",Oe=F.exercise_mode||F.high_temptarget_raises_sensitivity,Re=100,Ue=160;if(F.half_basal_exercise_target&&(Ue=F.half_basal_exercise_target),Oe&&F.temptargetSet&&Ie>Re||F.low_temptarget_lowers_sensitivity&&F.temptargetSet&&Ie<Re){var Ae=Ue-Re;sensitivityRatio=Ae*(Ae+Ie-Re)<=0?F.autosens_max:Ae/(Ae+Ie-Re),sensitivityRatio=Math.min(sensitivityRatio,F.autosens_max),sensitivityRatio=o(sensitivityRatio,2),De="from TT modifier",h+=", Ratio TT: "+sensitivityRatio,process.stderr.write("Sensitivity ratio set to "+sensitivityRatio+" based on temp target of "+Ie+"; ")}else void 0!==I&&I&&(sensitivityRatio=I.ratio,De="from Autosens",process.stderr.write("Autosens ratio: "+sensitivityRatio+"; "));if(sensitivityRatio&&(fe=F.current_basal*sensitivityRatio,(fe=t(fe,F))!==ge?process.stderr.write("Adjusting basal from "+ge+" to "+fe+"; "):process.stderr.write("Basal unchanged: "+fe+"; ")),F.temptargetSet);else if(void 0!==I&&I&&(F.sensitivity_raises_target&&I.ratio<1||F.resistance_lowers_target&&I.ratio>1)){we=o((we-60)/I.ratio)+60,Te=o((Te-60)/I.ratio)+60;var Pe=o((Ie-60)/I.ratio)+60;Ie===(Pe=Math.max(80,Pe))?process.stderr.write("target_bg unchanged: "+Pe+"; "):process.stderr.write("target_bg from "+Ie+" to "+Pe+"; "),Ie=Pe}var ke=200,Ee=200,je=200;if(e.noise>=2){var We=Math.max(1.1,F.noisyCGMTargetMultiplier);Math.min(250,F.maxRaw);ke=o(Math.min(200,we*We)),Ee=o(Math.min(200,Ie*We)),je=o(Math.min(200,Te*We)),process.stderr.write("Raising target_bg for noisy / raw CGM data, from "+Ie+" to "+Ee+"; "),we=ke,Ie=Ee,Te=je}var qe=we-.5*(we-40),ze=o(F.sens,1),Ne=F.sens;void 0!==I&&I&&((Ne=o(Ne=F.sens/sensitivityRatio,1))!==ze?process.stderr.write("ISF from "+n(ze,F)+" to "+n(Ne,F)):process.stderr.write("ISF unchanged: "+n(Ne,F))),console.error("CR:"+F.carb_ratio),console.error("----------------------------------"),console.error(" start autoISF"),console.error("----------------------------------");var Le=function(e,r){if(e.use_autoisf&&e.iob_threshold>0&&e.iob_threshold<r[0].iob)return s=", autoISF-SMB disabled:, IOB: "+o(r[0].iob,2)+", > threshold: "+e.iob_threshold+", maxIOB: "+e.max_iob,console.error(s),"iobTH";var a=n(e.min_bg,e);return e.use_autoisf&&e.temptargetSet&&e.enableSMB_EvenOn_OddOff||e.use_autoisf&&e.min_bg==e.max_bg&&e.enableSMB_EvenOn_OddOff_always?(e.temptargetSet?msgType="TempTarget ":msgType="profile target ","mmol/L"==e.out_units?(evenTarget=o(10*a,0)%2==0,msgUnits=" has ",msgTail=" decimal"):(evenTarget=a%2==0,msgUnits=" is ",msgTail=" number"),evenTarget?msgEven="even":msgEven="odd",evenTarget?(console.error("SMB enabled - "+msgType+a+msgUnits+msgEven+msgTail),e.temptargetSet&&a<100?(console.error("Full Loop enabled, SMB enforced"),s=", autoISF-SMB enabled:, even TT","enforced"):(s=", autoISF-SMB enabled:, even Target","enabled")):(console.error("SMB disabled - "+msgType+a+msgUnits+msgEven+msgTail),s=", autoISF-SMB disabled:, odd Target","blocked")):"oref"}(F,a),Xe=!0;if(C&&"oref"!=Le?("blocked"==Le&&(Xe=!1),console.error("loopSMB function overriden with autoISF target toggle, enableSMB = "+Xe)):(Xe=function(e,r,a,t,o,i){return r?!e.allowSMB_with_high_temptarget&&e.temptargetSet&&o>100?(console.error("SMB disabled due to high temptarget of "+o),!1):!0===a.bwFound&&!1===e.A52_risk_enable?(console.error("SMB disabled due to Bolus Wizard activity in the last 6 hours."),!1):!0===e.enableSMB_always?(a.bwFound?console.error("Warning: SMB enabled within 6h of using Bolus Wizard: be sure to easy bolus 30s before using Bolus Wizard"):console.error("SMB enabled due to enableSMB_always"),!0):!0===e.enableSMB_with_COB&&a.mealCOB?(a.bwCarbs?console.error("Warning: SMB enabled with Bolus Wizard carbs: be sure to easy bolus 30s before using Bolus Wizard"):console.error("SMB enabled for COB of",a.mealCOB),!0):!0===e.enableSMB_after_carbs&&a.carbs?(a.bwCarbs?console.error("Warning: SMB enabled with Bolus Wizard carbs: be sure to easy bolus 30s before using Bolus Wizard"):console.error("SMB enabled for 6h after carb entry"),!0):!0===e.enableSMB_with_temptarget&&e.temptargetSet&&o<100?(a.bwFound?console.error("Warning: SMB enabled within 6h of using Bolus Wizard: be sure to easy bolus 30s before using Bolus Wizard"):console.error("SMB enabled for temptarget of",n(o,e)),console.error("SMB enabled for temptargets with "+n(o,e)),!0):!0===e.enableSMB_high_bg&&null!==i&&t>=i?(console.error("Checking BG to see if High for SMB enablement."),console.error("Current BG",t," | High BG ",i),a.bwFound?console.error("Warning: High BG SMB enabled within 6h of using Bolus Wizard: be sure to easy bolus 30s before using Bolus Wizard"):console.error("High BG detected. Enabling SMB."),!0):(console.error("SMB disabled (no enableSMB preferences active or no condition satisfied)"),!1):(console.error("SMB disabled (!microBolusAllowed)"),!1)}(F,C,w,Me,Ie,Ce),console.error("loopSMB function returns enableSMB = "+Xe)),Ne=function(e,r,a,t,h,F,I,w,T,C,G,D){if(!t.use_autoisf)return console.error("autoISF disabled in Preferences"),i+=", autoISF, disabled",e;if(t.autoISF_off_Sport&&(t.high_temptarget_raises_sensitivity||t.exercise_mode)&&t.temptargetSet&&a>D)return console.error("autoISF disabled due to exercise"),i+=", autoISF, disabled (exercise)",e;const O=h.dura_p,R=h.delta_pl,U=h.delta_pn,A=h.r_squ,P=h.bg_acceleration,k=h.a_0,E=h.a_1,j=h.a_2,W=h.dura_ISF_minutes,q=h.dura_ISF_average;var z=t.autoISF_min,N=t.autoISF_max,L=!1,X=e,Y=a+10-q;if(F.mealCOB>0&&!t.enableautoisf_with_COB)return console.error("BG dependant autoISF by-passed; preferences disabled mealCOB of "+o(F.mealCOB,1)),i+=", autoISF, disabled with COB",e;var H=h.pp_debug;if(m+="BG-accel: "+o(P,3)+", PF-minutes: "+O+", PF-corr: "+o(A,4)+", PF-nextDelta: "+n(U,t)+", PF-lastDelta: "+n(R,t)+", regular Delta: "+n(h.delta,t),console.error(H+m+" , Weights Accel/Brake: "+t.bgAccel_ISF_weight+" / "+t.bgBrake_ISF_weight),t.enable_BG_acceleration){var Z=A;if(0!=j&&Z>=.9){var $=-E/2/j*5,J=o(k-$*$/25*j,1);($=o($,1))>0&&P<0?(b="predicts a Max of "+n(J,t)+", in about "+Math.abs($)+"min",console.error("Parabolic fit "+b)):$>0&&P>0?(b="predicts a Min of "+n(J,t)+", in about "+Math.abs($)+"min",console.error("Parabolic fit "+b)):$<0&&P<0?(b="saw Max of "+n(J,t)+", about "+Math.abs($)+"min ago",console.error("Parabolic fit "+b)):$<0&&P>0&&(b="saw Min of "+n(J,t)+", about "+Math.abs($)+"min ago",console.error("Parabolic fit "+b))}if(Z<.9)b="acce_ISF by-passed, as correlation, "+o(Z,2)+", is too low",console.error("Parabolic fit "+b),c+=", Parabolic Fit, "+b;else{var K=10*(Z-.9),Q=1,V=1;h.glucose<t.target_bg?P>0?(P>1&&(Q=.5),V=t.bgBrake_ISF_weight):P<0&&(V=t.bgAccel_ISF_weight):P<0?V=t.bgBrake_ISF_weight:P>0&&(V=t.bgAccel_ISF_weight),(v=1+P*Q*V*K)<0&&(v=.1),console.error(c+"acce_ISF adaptation is "+o(v,2)),1!=v&&(L=!0,c+=", Parabolic Fit, "+b+", acce-ISF Ratio: "+o(v,2))}}else console.error("autoISF BG accelertion adaption disabled in Preferences");i+=s+c+", autoISF",B=1+y(100-Y,t,"bg"),console.error("bg_ISF adaptation is "+o(B,2));var ee=1,re=1;if(B<1)return ee=Math.min(B,v),v>1?(p="bg-ISF adaptation lifted to "+o(ee=B*v,2)+", as BG accelerates already",console.error(p),i+=", bg-ISF Ratio: "+o(ee,2)+"(accel.)"):i+=", bg-ISF Ratio: "+o(ee,2)+"(minimal)",re=x(ee,z,N,T,r,t,G,a,D),X=Math.min(720,o(t.sens/re,1)),i+=", bg-ISF Ratio: "+o(re,2),X;B>1&&(L=!0,i+=", bg-ISF Ratio: "+o(B,2));var ae=h.delta;t.enable_pp_ISF_always||t.pp_ISF_hours>=(I-F.lastCarbTime)/1e3/3600?deltaType="pp":deltaType="delta",Y>0?console.error(deltaType+"_ISF adaptation by-passed as average glucose < "+a+"+10"):h.short_avgdelta<0?console.error(deltaType+"_ISF adaptation by-passed as no rise or too short lived"):"pp"==deltaType?(M=1+Math.max(0,ae*t.pp_ISF_weight),console.error("pp_ISF adaptation is "+o(M,2)),u=", pp-ISF Ratio: "+o(M,2),1!=M&&(L=!0)):(_=y(ae,t,"delta"),Y>-20&&(_*=.5),_=1+_,console.error("delta_ISF adaptation is "+o(_,2)),d=", Œî-ISF Ratio: "+o(_,2),1!=_&&(L=!0));var te=t.dura_ISF_weight;F.mealCOB>0&&!t.enableautoisf_with_COB?console.error("dura_ISF by-passed; preferences disabled mealCOB of "+o(F.mealCOB,1)):W<10?console.error("dura_ISF by-passed; BG is only "+W+"m at level "+q):q<=a?console.error("dura_ISF by-passed; avg. glucose "+q+" below target "+n(a,t)):(S+=W/60*(te/a)*(q-a),L=!0,l=", Duration: "+W+", Avg: "+n(q,t)+", dura-ISF Ratio: "+o(S,2),console.error("dura_ISF adaptation is "+o(S,2)+" because ISF "+e+" did not do it for "+o(W,1)+"m"));return L?(ee=Math.max(S,B,_,v,M),console.error("autoISF adaption ratios:"),console.error("  dura "+o(S,2)),console.error("  bg "+o(B,2)),console.error("  delta "+o(_,2)),console.error("  pp "+o(M,2)),console.error("  accel "+o(v,2)),v<1&&(p="strongest ISF factor "+o(ee,2)+" weakened to "+o(ee*v,2)+" as bg decelerates already",console.error(p),ee*=v),re=x(ee,z,N,T,r,t,G,a,D),X=o(t.sens/re,1),i+=u+d+l+", final Ratio: "+o(re,2)+f+g+", final ISF: "+n(t.sens,t)+"‚Üí"+n(X,t),X):(i+=", not modified",console.error("autoISF does not modify"),X)}(Ne,De,Ie,F,e,w,D,0,sensitivityRatio,0,Oe,Re),console.error("----------------------------------"),console.error(" end autoISF"),console.error("----------------------------------"),void 0===a)return pe.error="Error: iob_data undefined. ",pe;var Ye,He=a;if(a.length,a.length>1&&(a=He[0]),void 0===a.activity||void 0===a.iob)return pe.error="Error: iob_data missing some property. ",pe;var Ze=((Ye=void 0!==a.lastTemp?o((new Date(he).getTime()-a.lastTemp.date)/6e4):0)+r.duration)%30;if(console.error("currenttemp:"+r.rate+" lastTempAge:"+Ye+"m, tempModulus:"+Ze+"m"),pe.temp="absolute",pe.deliverAt=be,C&&r&&a.lastTemp&&r.rate!==a.lastTemp.rate&&Ye>10&&r.duration)return pe.reason="Warning: currenttemp rate "+r.rate+" != lastTemp rate "+a.lastTemp.rate+" from pumphistory; canceling temp",T.setTempBasal(0,0,F,pe,r);if(r&&a.lastTemp&&r.duration>0){var $e=Ye-a.lastTemp.duration;if($e>5&&Ye>10)return pe.reason="Warning: currenttemp running but lastTemp from pumphistory ended "+$e+"m ago; canceling temp",T.setTempBasal(0,0,F,pe,r)}var Je=o(-a.activity*Ne*5,2),Ke=o(6*(ye-Je));Ke<0&&(Ke=o(6*(xe-Je)))<0&&(Ke=o(6*(e.long_avgdelta-Je)));var Qe=Me,Ve=(Qe=a.iob>0?o(Me-a.iob*Ne):o(Me-a.iob*Math.min(Ne,F.sens)))+Ke;if(void 0===Ve||isNaN(Ve))return pe.error="Error: could not calculate eventualBG. Sensitivity: "+Ne+" Deviation: "+Ke,pe;var er=function(e,r,a){return o(a+(e-r)/24,1)}(Ie,Ve,Je);pe={temp:"absolute",bg:n(Me,F),tick:ve,eventualBG:Ve,insulinReq:0,reservoir:G,deliverAt:be,sensitivityRatio,TDD:ce,insulin:me};var rr=[],ar=[],tr=[],or=[];rr.push(Me),ar.push(Me),or.push(Me),tr.push(Me);var nr=F.enableUAM,ir=0,sr=0;ir=o(ye-Je,1);var lr=o(ye-Je,1);csf=Ne/F.carb_ratio,console.error("profile.sens:"+n(F.sens,F)+", sens:"+n(Ne,F)+", CSF:"+o(csf,1));var ur=o(30*csf*5/60,1);ir>ur&&(console.error("Limiting carb impact from "+ir+" to "+ur+"mg/dL/5m (30g/h)"),ir=ur);var dr=3;sensitivityRatio&&(dr/=sensitivityRatio);var mr=dr;if(w.carbs){dr=Math.max(dr,w.mealCOB/20);var cr=o((new Date(he).getTime()-w.lastCarbTime)/6e4),pr=(w.carbs-w.mealCOB)/w.carbs;mr=o(mr=dr+1.5*cr/60,1),console.error("Last carbs "+cr+" minutes ago; remainingCATime:"+mr+"hours; "+o(100*pr)+"% carbs absorbed")}var br=Math.max(0,ir/5*60*mr/2)/csf,gr=90,fr=1;F.remainingCarbsCap&&(gr=Math.min(90,F.remainingCarbsCap)),F.remainingCarbsFraction&&(fr=Math.min(1,F.remainingCarbsFraction));var hr=1-fr,vr=Math.max(0,w.mealCOB-br-w.carbs*hr),Br=(vr=Math.min(gr,vr))*csf*5/60/(mr/2),_r=o(w.slopeFromMaxDeviation,2),Mr=o(w.slopeFromMinDeviation,2),Sr=Math.min(_r,-Mr/3),yr=0;0===ir?sr=0:!0===F.floating_carbs?(sr=Math.min(60*mr/5/2,Math.max(0,w.carbs*csf/ir)),yr=Math.min(60*mr/5/2,Math.max(0,w.mealCOB*csf/ir)),w.carbs>0&&(i+=", Floating Carbs:, CID: "+o(sr,1)+", MealCarbs: "+o(w.carbs,1)+", Not Floating:, CID: "+o(yr,1)+", MealCOB: "+o(w.mealCOB,1),console.error("Floating Carbs CID: "+o(sr,1)+" / MealCarbs: "+o(w.carbs,1)+" vs. Not Floating:"+o(yr,1)+" / MealCOB:"+o(w.mealCOB,1)))):sr=Math.min(60*mr/5/2,Math.max(0,w.mealCOB*csf/ir)),console.error("Carb Impact:"+ir+"mg/dL per 5m; CI Duration:"+o(5*sr/60*2,1)+"hours; remaining CI ("+o(mr/2,2)+"h peak):",o(Br,1)+"mg/dL per 5m");var xr,Fr,Ir,wr,Tr,Cr=999,Gr=999,Dr=999,Or=Me,Rr=999,Ur=999,Ar=999,Pr=999,kr=Ve,Er=Me,jr=Me,Wr=0,qr=[],zr=[];try{He.forEach((function(e){var r=o(-e.activity*Ne*5,2),a=o(-e.iobWithZeroTemp.activity*Ne*5,2),t=ir*(1-Math.min(1,ar.length/12));kr=ar[ar.length-1]+r+t;var n=or[or.length-1]+a,i=Math.max(0,Math.max(0,ir)*(1-rr.length/Math.max(2*sr,1))),s=Math.min(rr.length,12*mr-rr.length),l=Math.max(0,s/(mr/2*12)*Br);i+l,qr.push(o(l,0)),zr.push(o(i,0)),COBpredBG=rr[rr.length-1]+r+Math.min(0,t)+i+l;var u=Math.max(0,lr+tr.length*Sr),d=Math.max(0,lr*(1-tr.length/Math.max(36,1))),m=Math.min(u,d);m>0&&(Wr=o(5*(tr.length+1)/60,1)),UAMpredBG=tr[tr.length-1]+r+Math.min(0,t)+m,ar.length<48&&ar.push(kr),rr.length<48&&rr.push(COBpredBG),tr.length<48&&tr.push(UAMpredBG),or.length<48&&or.push(n),COBpredBG<Rr&&(Rr=o(COBpredBG)),UAMpredBG<Ur&&(Ur=o(UAMpredBG)),kr<Ar&&(Ar=o(kr)),n<Pr&&(Pr=o(n));ar.length>18&&kr<Cr&&(Cr=o(kr)),kr>Er&&(Er=kr),(sr||Br>0)&&rr.length>18&&COBpredBG<Gr&&(Gr=o(COBpredBG)),(sr||Br>0)&&COBpredBG>Er&&(jr=COBpredBG),nr&&tr.length>12&&UAMpredBG<Dr&&(Dr=o(UAMpredBG)),nr&&UAMpredBG>Er&&UAMpredBG}))}catch(e){console.error("Problem with iobArray.  Optional feature Advanced Meal Assist disabled")}pe.predBGs={},ar.forEach((function(e,r,a){a[r]=o(Math.min(401,Math.max(39,e)))}));for(var Nr=ar.length-1;Nr>12&&ar[Nr-1]===ar[Nr];Nr--)ar.pop();for(pe.predBGs.IOB=ar,Ir=o(ar[ar.length-1]),or.forEach((function(e,r,a){a[r]=o(Math.min(401,Math.max(39,e)))})),Nr=or.length-1;Nr>6&&!(or[Nr-1]>=or[Nr]||or[Nr]<=Ie);Nr--)or.pop();if(pe.predBGs.ZT=or,o(or[or.length-1]),w.mealCOB>0&&(ir>0||Br>0)){for(rr.forEach((function(e,r,a){a[r]=o(Math.min(401,Math.max(39,e)))})),Nr=rr.length-1;Nr>12&&rr[Nr-1]===rr[Nr];Nr--)rr.pop();pe.predBGs.COB=rr,wr=o(rr[rr.length-1]),Ve=Math.max(Ve,o(rr[rr.length-1]))}if(ir>0||Br>0){if(nr){for(tr.forEach((function(e,r,a){a[r]=o(Math.min(401,Math.max(39,e)))})),Nr=tr.length-1;Nr>12&&tr[Nr-1]===tr[Nr];Nr--)tr.pop();pe.predBGs.UAM=tr,Tr=o(tr[tr.length-1]),tr[tr.length-1]&&(Ve=Math.max(Ve,o(tr[tr.length-1])))}pe.eventualBG=Ve}console.error("UAM Impact:"+lr+"mg/dL per 5m; UAM Duration:"+Wr+"hours"),Cr=Math.max(39,Cr),Gr=Math.max(39,Gr),Dr=Math.max(39,Dr),xr=o(Cr);var Lr=w.mealCOB/w.carbs;Fr=o(Dr<999&&Gr<999?(1-Lr)*UAMpredBG+Lr*COBpredBG:Gr<999?(kr+COBpredBG)/2:Dr<999?(kr+UAMpredBG)/2:kr),Pr>Fr&&(Fr=Pr),Or=o(Or=sr||Br>0?nr?Lr*Rr+(1-Lr)*Ur:Rr:nr?Ur:Ar);var Xr=Dr;if(Pr<qe)Xr=(Dr+Pr)/2;else if(Pr<Ie){var Yr=(Pr-qe)/(Ie-qe);Xr=(Dr+(Dr*Yr+Pr*(1-Yr)))/2}else Pr>Dr&&(Xr=(Dr+Pr)/2);if(Xr=o(Xr),w.carbs)if(!nr&&Gr<999)xr=o(Math.max(Cr,Gr));else if(Gr<999){var Hr=Lr*Gr+(1-Lr)*Xr;xr=o(Math.max(Cr,Gr,Hr))}else xr=nr?Xr:Or;else nr&&(xr=o(Math.max(Cr,Xr)));xr=Math.min(xr,Fr),process.stderr.write("minPredBG: "+n(xr,F)+" minIOBPredBG: "+n(Cr,F)+" minZTGuardBG: "+n(Pr,F)),Gr<999&&process.stderr.write(" minCOBPredBG: "+n(Gr,F)),Dr<999&&process.stderr.write(" minUAMPredBG: "+n(Dr,F)),console.error(" avgPredBG:"+n(Fr,F)+" COB/Carbs:"+w.mealCOB+"/"+w.carbs),jr>Me&&(xr=Math.min(xr,jr)),pe.COB=w.mealCOB,pe.IOB=a.iob,pe.BGI=n(Je,F),pe.deviation=n(Ke,F),pe.dura_ISFratio=o(S,2),pe.bg_ISFratio=o(B,2),pe.delta_ISFratio=o(_,2),pe.pp_ISFratio=o(M,2),pe.acce_ISFratio=o(v,2),pe.auto_ISFratio=o(F.sens/Ne,2),pe.ISF=n(Ne,F),pe.CR=o(F.carb_ratio,2),pe.TDD=o(ce,1),pe.TDDytd=o(Z,1),pe.TDD7d=o($,1),pe.target_bg=n(Ie,F);var Zr=function(e,r,a,t){if(!e.use_autoisf)return console.error("autoISF disabled, don't adjust SMB Delivery Ratio"),.5;var n=e.smb_delivery_ratio_bg_range;n<10&&(n/=.0555);var i=e.smb_delivery_ratio,s=Math.min(e.smb_delivery_ratio_min,e.smb_delivery_ratio_max),l=Math.max(e.smb_delivery_ratio_min,e.smb_delivery_ratio_max),u=a+e.smb_delivery_ratio_bg_range,d=i;return n>0&&(d=s+(l-s)*(r-a)/n,d=Math.max(s,Math.min(l,d))),"enforced"==t?(console.error("SMB delivery ratio set to "+o(Math.max(i,d),2)+" as max of fixed and interpolated values"),Math.max(i,d)):0==n?(console.error("SMB delivery ratio set to fixed value "+o(i,2)),i):r<=a?(console.error("SMB delivery ratio limited by minimum value "+o(s,2)),s):r>=u?(console.error("SMB delivery ratio limited by maximum value "+o(l,2)),l):(console.error("SMB delivery ratio set to interpolated value "+o(d,2)),d)}(F,Me,Ie,Le);pe.SMBratio=o(Zr,2);var $r="SMB Del.Ratio:, "+o(Zr,2);pe.reason=$r+h+i+", Standard, COB: "+pe.COB+", Dev: "+pe.deviation+", BGI: "+pe.BGI+", ISF: "+pe.ISF+", CR: "+pe.CR+", Target: "+pe.target_bg+", minPredBG "+n(xr,F)+", minGuardBG "+n(Or,F)+", IOBpredBG "+n(Ir,F),wr>0&&(pe.reason+=", COBpredBG "+n(wr,F)),Tr>0&&(pe.reason+=", UAMpredBG "+n(Tr,F)),pe.reason+=tddReason,pe.reason+="; ";var Jr=Qe;Jr<40&&(Jr=Math.min(Or,Jr));var Kr=qe-Jr,Qr=240,Vr=240;if(w.mealCOB>0&&(ir>0||Br>0)){for(Nr=0;Nr<rr.length;Nr++)if(rr[Nr]<we){Qr=5*Nr;break}for(Nr=0;Nr<rr.length;Nr++)if(rr[Nr]<qe){Vr=5*Nr;break}}else{for(Nr=0;Nr<ar.length;Nr++)if(ar[Nr]<we){Qr=5*Nr;break}for(Nr=0;Nr<ar.length;Nr++)if(ar[Nr]<qe){Vr=5*Nr;break}}Xe&&Or<qe&&(console.error("minGuardBG "+n(Or,F)+" projected below "+n(qe,F)+" - disabling SMB"),Xe=!1);var ea=.2;void 0!==F.maxDelta_bg_threshold&&(ea=Math.min(F.maxDelta_bg_threshold,.4),console.error("maxDelta threshold for BG-Jump to allow SMB's set to: "+100*ea+"%")),Fe>ea*Me&&(console.error("maxDelta "+n(Fe,F)+" > "+100*ea+"% of BG "+n(Me,F)+" - disabling SMB"),pe.reason+="maxDelta "+n(Fe,F)+" > "+100*ea+"% of BG "+n(Me,F)+" - SMB disabled!, ",Xe=!1),console.error("BG projected to remain above "+n(we,F)+" for "+Qr+"minutes"),(Vr<240||Qr<60)&&console.error("BG projected to remain above "+n(qe,F)+" for "+Vr+"minutes");var ra=Vr,aa=F.current_basal*Ne*ra/60,ta=Math.max(0,w.mealCOB-.25*w.carbs),oa=(Kr-aa)/csf-ta;aa=o(aa),oa=o(oa),console.error("naive_eventualBG: "+n(Qe,F)+", bgUndershoot: "+n(Kr,F)+", zeroTempDuration: "+ra+", zeroTempEffect: "+aa+", carbsReq: "+oa),"Could not parse clock data"==w.reason?console.error("carbsReq unknown: Could not parse clock data"):oa>=F.carbsReqThreshold&&Vr<=45&&(pe.carbsReq=oa,pe.reason+=oa+" add'l carbs req w/in "+Vr+"m; ");var na=0;if(Me<qe&&a.iob<20*-F.current_basal/60&&ye>0&&ye>er)pe.reason+="IOB "+a.iob+" < "+o(20*-F.current_basal/60,2),pe.reason+=" and minDelta "+n(ye,F)+" > expectedDelta "+n(er,F)+"; ";else if(Me<qe||Or<qe)return pe.reason+="minGuardBG "+n(Or,F)+"<"+n(qe,F),na=o(60*((Kr=Ie-Or)/Ne)/F.current_basal),na=30*o(na/30),na=Math.min(120,Math.max(30,na)),T.setTempBasal(0,na,F,pe,r);if(F.skip_neutral_temps&&pe.deliverAt.getMinutes()>=55)return pe.reason+="; Canceling temp at "+pe.deliverAt.getMinutes()+"m past the hour. ",T.setTempBasal(0,0,F,pe,r);var ia=0,sa=fe;if(Ve<we){if(pe.reason+="Eventual BG "+n(Ve,F)+" < "+n(we,F),ye>er&&ye>0&&!oa)return Qe<40?(pe.reason+=", naive_eventualBG < 40. ",T.setTempBasal(0,30,F,pe,r)):(e.delta>ye?pe.reason+=", but Delta "+n(ve,F)+" > expectedDelta "+n(er,F):pe.reason+=", but Min. Delta "+ye.toFixed(2)+" > Exp. Delta "+n(er,F),r.duration>15&&t(fe,F)===t(r.rate,F)?(pe.reason+=", temp "+r.rate+" ~ req "+fe+"U/hr. ",pe):(pe.reason+="; setting current basal of "+fe+" as temp. ",T.setTempBasal(fe,30,F,pe,r)));ia=o(ia=2*Math.min(0,(Ve-Ie)/Ne),2);var la=Math.min(0,(Qe-Ie)/Ne);if(la=o(la,2),ye<0&&ye>er)ia=o(ia*(ye/er),2);if(sa=t(sa=fe+2*ia,F),r.duration*(r.rate-fe)/60<Math.min(ia,la)-.3*fe)return pe.reason+=", "+r.duration+"m@"+r.rate.toFixed(2)+" is a lot less than needed. ",T.setTempBasal(sa,30,F,pe,r);if(void 0!==r.rate&&r.duration>5&&sa>=.8*r.rate)return pe.reason+=", temp "+r.rate+" ~< req "+sa+"U/hr. ",pe;if(sa<=0){if((na=o(60*((Kr=Ie-Qe)/Ne)/F.current_basal))<0?na=0:(na=30*o(na/30),na=Math.min(120,Math.max(0,na))),na>0)return pe.reason+=", setting "+na+"m zero temp. ",T.setTempBasal(sa,na,F,pe,r)}else pe.reason+=", setting "+sa+"U/hr. ";return T.setTempBasal(sa,30,F,pe,r)}if(ye<er&&(!C||!Xe))return e.delta<ye?pe.reason+="Eventual BG "+n(Ve,F)+" > "+n(we,F)+" but Delta "+n(ve,F)+" < Exp. Delta "+n(er,F):pe.reason+="Eventual BG "+n(Ve,F)+" > "+n(we,F)+" but Min. Delta "+ye.toFixed(2)+" < Exp. Delta "+n(er,F),r.duration>15&&t(fe,F)===t(r.rate,F)?(pe.reason+=", temp "+r.rate+" ~ req "+fe+"U/hr. ",pe):(pe.reason+="; setting current basal of "+fe+" as temp. ",T.setTempBasal(fe,30,F,pe,r));if(Math.min(Ve,xr)<Te&&(!C||!Xe))return pe.reason+=n(Ve,F)+"-"+n(xr,F)+" in range: no temp required",r.duration>15&&t(fe,F)===t(r.rate,F)?(pe.reason+=", temp "+r.rate+" ~ req "+fe+"U/hr. ",pe):(pe.reason+="; setting current basal of "+fe+" as temp. ",T.setTempBasal(fe,30,F,pe,r));if(Ve>=Te&&(pe.reason+="Eventual BG "+n(Ve,F)+" >= "+n(Te,F)+", "),a.iob>Ge)return pe.reason+="IOB "+o(a.iob,2)+" > max_iob "+Ge,r.duration>15&&t(fe,F)===t(r.rate,F)?(pe.reason+=", temp "+r.rate+" ~ req "+fe+"U/hr. ",pe):(pe.reason+="; setting current basal of "+fe+" as temp. ",T.setTempBasal(fe,30,F,pe,r));(ia=o((Math.min(xr,Ve)-Ie)/Ne,2))>Ge-a.iob&&(pe.reason+="max_iob "+Ge+", ",ia=Ge-a.iob),sa=t(sa=fe+2*ia,F),ia=o(ia,3),pe.insulinReq=ia;var ua=o((new Date(he).getTime()-a.lastBolusTime)/6e4,1);if(C&&Xe&&Me>qe){var da=o(w.mealCOB/F.carb_ratio,3);if(F.use_autoisf)ma=F.smb_max_range_extension;else{console.error("autoISF disabled, SMB range extension disabled");var ma=1}ma>1&&console.error("SMB max range extended from default by factor "+ma);var ca=0;void 0===F.maxSMBBasalMinutes?(ca=o(ma*F.current_basal*30/60,1),console.error("profile.maxSMBBasalMinutes undefined: defaulting to 30m")):a.iob>da&&a.iob>0?(console.error("IOB",a.iob,"> COB",w.mealCOB+"; mealInsulinReq =",da),F.maxUAMSMBBasalMinutes?(console.error("profile.maxUAMSMBBasalMinutes:",F.maxUAMSMBBasalMinutes,"profile.current_basal:",F.current_basal),ca=o(ma*F.current_basal*F.maxUAMSMBBasalMinutes/60,1)):(console.error("profile.maxUAMSMBBasalMinutes undefined: defaulting to 30m"),ca=o(30*F.current_basal/60,1))):(console.error("profile.maxSMBBasalMinutes:",F.maxSMBBasalMinutes,"profile.current_basal:",F.current_basal),ca=o(ma*F.current_basal*F.maxSMBBasalMinutes/60,1));var pa=F.bolus_increment,ba=1/pa;F.use_autoisf||(console.error("autoISF disabled, don't adjust SMB Delivery Ratio"),Zr=.5),Zr>.5&&console.error("SMB Delivery Ratio increased from default 0.5 to "+o(Zr,2));var ga=Math.min(ia*Zr,ca);ga=Math.floor(ga*ba)/ba,na=o(60*((Ie-(Qe+Cr)/2)/Ne)/F.current_basal),ia>0&&ga<pa&&(na=0);var fa=0;na<=0?na=0:na>=30?(na=30*o(na/30),na=Math.min(60,Math.max(0,na))):(fa=o(fe*na/30,2),na=30),pe.reason+=" insulinReq "+ia,ga>=ca&&(pe.reason+="; maxBolus "+ca),na>0&&(pe.reason+="; setting "+na+"m low temp of "+fa+"U/h"),pe.reason+=". ";var ha=3;F.SMBInterval&&(ha=Math.min(10,Math.max(1,F.SMBInterval)));var va=o(ha-ua,0),Ba=o(60*(ha-ua),0)%60;if(console.error("naive_eventualBG "+n(Qe,F)+", "+na+"m "+fa+"U/h temp needed; last bolus "+ua+"m ago; maxBolus: "+ca),ua>ha?ga>0&&(pe.units=ga,pe.reason+="Microbolusing "+ga+"U. "):pe.reason+="Waiting "+va+"m "+Ba+"s to microbolus again. ",na>0)return pe.rate=fa,pe.duration=na,pe}var _a=T.getMaxSafeBasal(F);return sa>_a&&(pe.reason+="adj. req. rate: "+o(sa,2)+" to maxSafeBasal: "+o(_a,2)+", ",sa=t(_a,F)),r.duration*(r.rate-fe)/60>=2*ia?(pe.reason+=r.duration+"m@"+r.rate.toFixed(2)+" > 2 * insulinReq. Setting temp basal of "+sa+"U/hr. ",T.setTempBasal(sa,30,F,pe,r)):void 0===r.duration||0===r.duration?(pe.reason+="no temp, setting "+sa+"U/hr. ",T.setTempBasal(sa,30,F,pe,r)):r.duration>5&&t(sa,F)<=t(r.rate,F)?(pe.reason+="temp "+r.rate+" >~ req "+sa+"U/hr. ",pe):(pe.reason+="temp "+r.rate+"<"+sa+"U/hr. ",T.setTempBasal(sa,30,F,pe,r))}},6880:(e,r,a)=>{var t=a(6654);e.exports=function(e,r){var a=20;void 0!==r&&"string"==typeof r.model&&(t(r.model,"54")||t(r.model,"23"))&&(a=40);return e<1?Math.round(e*a)/a:e<10?Math.round(20*e)/20:Math.round(10*e)/10}},2705:(e,r,a)=>{var t=a(5639).Symbol;e.exports=t},9932:e=>{e.exports=function(e,r){for(var a=-1,t=null==e?0:e.length,o=Array(t);++a<t;)o[a]=r(e[a],a,e);return o}},9750:e=>{e.exports=function(e,r,a){return e==e&&(void 0!==a&&(e=e<=a?e:a),void 0!==r&&(e=e>=r?e:r)),e}},4239:(e,r,a)=>{var t=a(2705),o=a(9607),n=a(2333),i=t?t.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):n(e)}},531:(e,r,a)=>{var t=a(2705),o=a(9932),n=a(1469),i=a(3448),s=t?t.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(r){if("string"==typeof r)return r;if(n(r))return o(r,e)+"";if(i(r))return l?l.call(r):"";var a=r+"";return"0"==a&&1/r==-Infinity?"-0":a}},7561:(e,r,a)=>{var t=a(7990),o=/^\s+/;e.exports=function(e){return e?e.slice(0,t(e)+1).replace(o,""):e}},1957:(e,r,a)=>{var t="object"==typeof a.g&&a.g&&a.g.Object===Object&&a.g;e.exports=t},9607:(e,r,a)=>{var t=a(2705),o=Object.prototype,n=o.hasOwnProperty,i=o.toString,s=t?t.toStringTag:void 0;e.exports=function(e){var r=n.call(e,s),a=e[s];try{e[s]=void 0;var t=!0}catch(e){}var o=i.call(e);return t&&(r?e[s]=a:delete e[s]),o}},2333:e=>{var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},5639:(e,r,a)=>{var t=a(1957),o="object"==typeof self&&self&&self.Object===Object&&self,n=t||o||Function("return this")();e.exports=n},7990:e=>{var r=/\s/;e.exports=function(e){for(var a=e.length;a--&&r.test(e.charAt(a)););return a}},6654:(e,r,a)=>{var t=a(9750),o=a(531),n=a(554),i=a(9833);e.exports=function(e,r,a){e=i(e),r=o(r);var s=e.length,l=a=void 0===a?s:t(n(a),0,s);return(a-=r.length)>=0&&e.slice(a,l)==r}},1469:e=>{var r=Array.isArray;e.exports=r},3218:e=>{e.exports=function(e){var r=typeof e;return null!=e&&("object"==r||"function"==r)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3448:(e,r,a)=>{var t=a(4239),o=a(7005);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==t(e)}},8601:(e,r,a)=>{var t=a(4841),o=1/0;e.exports=function(e){return e?(e=t(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},554:(e,r,a)=>{var t=a(8601);e.exports=function(e){var r=t(e),a=r%1;return r==r?a?r-a:r:0}},4841:(e,r,a)=>{var t=a(7561),o=a(3218),n=a(3448),i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(n(e))return NaN;if(o(e)){var r="function"==typeof e.valueOf?e.valueOf():e;e=o(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=t(e);var a=s.test(e);return a||l.test(e)?u(e.slice(2),a?2:8):i.test(e)?NaN:+e}},9833:(e,r,a)=>{var t=a(531);e.exports=function(e){return null==e?"":t(e)}}},r={};function a(t){var o=r[t];if(void 0!==o)return o.exports;var n=r[t]={exports:{}};return e[t](n,n.exports,a),n.exports}a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var t=a(5546);freeaps_determineBasal=t})();