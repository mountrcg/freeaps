var freeaps_determineBasal;(()=>{var e={5546:(e,r,a)=>{var t=a(6880);function o(e,r){r||(r=0);var a=Math.pow(10,r);return Math.round(e*a)/a}function n(e,r){return"mmol/L"===r.out_units?o(.0555*e,1):Math.round(e)}var i="",s="",l="",u="",m="",d="",c="",p="",b="",g="",f="",h="",v=1,B=1,_=1,M=1,S=1;function y(e,r,a){"bg"==a?(polyX=[50,60,80,90,100,110,150,180,200],polyY=[-.5,-.5,-.3,-.2,0,0,.5,.7,.7]):"delta"==a&&(polyX=[2,7,12,16,20],polyY=[0,0,.4,.7,.7]);var t=polyX.length-1,o=polyX[0],n=polyY[0],i=polyX[t],s=polyY[t],l=1,u=1,m=1,d=o;if(o>e)i=polyX[1],l=(u=n)+((s=polyY[1])-u)/(i-(m=o))*(e-m);else if(i<e)o=polyX[t-1],l=(u=n=polyY[t-1])+(s-u)/(i-(m=o))*(e-m);else for(var c=0;c<=t;c++){if(o=polyX[c],n=polyY[c],o==e){l=n;break}if(o>e){l=u+(n-u)/(o-(m=d))*(e-m);break}u=n,d=o}return l*="delta"==a?r.delta_ISFrange_weight:e>100?r.higher_ISFrange_weight:r.lower_ISFrange_weight}function x(e,r,a,t,n,i,s,l,u){console.error("check ratio "+o(e,2)+" against autoISF min: "+r+" and autoISF max: "+a),e<r?(b=" (lmtd.min)",c="weakest autoISF factor "+o(e,2)+" limited by autoISF_min "+r,console.error(c),e=r):e>a&&(b=" (lmtd.max)",c="strongest autoISF factor "+o(e,2)+" limited by autoISF_max "+a,console.error(c),e=a);var m=1;return s&&i.temptargetSet&&l>u?(m=e*t,n=" (exerciseMode)",console.error("autoISF adjusts sens "+t+", instead of profile.sens "+i.sens),g=n):e>=1?(m=Math.max(e,t),e>=t&&(n="")):(m=Math.min(e,t),e<=t&&(n="")),c="final ISF factor "+o(m,2)+n,console.error(c),m}e.exports=function(e,r,a,I,F,T,w,C,D,G,O,R,U,A){var P=0,E="",j="",k="",q="",W="",z=0,N=0,L=0,X=0,Y=0,H=0;const Z=A.tddYtd,$=A.tdd7d;function J(e,r){var a=e.getTime();return new Date(a+36e5*r)}function K(e){var r=I.bolus_increment;.025!=r&&(r=.05);var a=e/r;return a>=1?o(Math.floor(a)*r,5):0}function Q(e){function r(e){return e<10&&(e="0"+e),e}return r(e.getHours())+":"+r(e.getMinutes())+":00"}function V(e,r){var a=new Date("1/1/1999 "+e),t=new Date("1/1/1999 "+r);return(a.getTime()-t.getTime())/36e5}function ee(e,r){var a=0,t=r,o=(e-r)/36e5,n=0,i=o,s=0;do{if(o>0){var l=Q(t);U[0].rate;for(let e=0;e<U.length;e++){var u=U[e].start;if(l==u){if(e+1<U.length){o>=(s=V(U[e+1].start,U[e].start))?n=s:o<s&&(n=o)}else if(e+1==U.length){let r=U[0].start;o>=(s=24-V(U[e].start,r))?n=s:o<s&&(n=o)}a+=K(U[e].rate*n),o-=n,t=J(t,n)}else if(l>u)if(e+1<U.length){var m=U[e+1].start;l<m&&(o>=(s=V(m,l))?n=s:o<s&&(n=o),a+=K(U[e].rate*n),o-=n,t=J(t,n))}else if(e==U.length-1){o>=(s=V("23:59:59",l))?n=s:o<s&&(n=o),a+=K(U[e].rate*n),o-=n,t=J(t,n)}}}}while(o>0&&o<i);return a}if(O.length){let e=O.length-1;var re=new Date(O[e].timestamp),ae=new Date(O[0].timestamp);if("TempBasalDuration"==O[0]._type&&(ae=new Date),(P=(ae-re)/36e5)<23.9&&P>21)Y=ee(re,(te=24-P,oe=re.getTime(),new Date(oe-36e5*te))),q="24 hours of data is required for an accurate tdd calculation. Currently only "+P.toPrecision(3)+" hours of pump history data are available. Using your pump scheduled basals to fill in the missing hours. Scheduled basals added: "+Y.toPrecision(5)+" U. ";else P<21?(dynISFenabled=!1,enableDynamicCR=!1):q=""}else console.log("Pumphistory is empty!"),dynISFenabled=!1,enableDynamicCR=!1;var te,oe,ne=0,ie=0;o((new Date(_e).getTime()-T.lastBolusNormalTime)/6e4,1);for(let e=0;e<O.length;e++)if("Bolus"==O[e]._type&&(X+=O[e].amount,0==ne&&O[e].amount>=I.iTime_Start_Bolus)){ne=t(O[e].amount,I);var se=new Date(O[e].timestamp);ie=o((new Date-se)/36e5*60)}for(let e=1;e<O.length;e++)if("TempBasal"==O[e]._type&&O[e].rate>0){z=e,H=O[e].rate;var le=O[e-1]["duration (min)"]/60,ue=le,me=new Date(O[e-1].timestamp),de=me;do{if(e--,0==e){de=new Date;break}if("TempBasal"==O[e]._type||"PumpSuspend"==O[e]._type){de=new Date(O[e].timestamp);break}}while(e>0);var ce=(de-me)/36e5;ce<ue&&(le=ce),L+=K(H*le),e=z}for(let e=0;e<O.length;e++)if(0,0==O[e]["duration (min)"]||"PumpResume"==O[e]._type){let r=new Date(O[e].timestamp),a=r,t=e;do{if(t>0&&(--t,"TempBasal"==O[t]._type)){a=new Date(O[t].timestamp);break}}while(t>0);(a-r)/36e5>0&&(Y+=ee(a,r))}for(let e=O.length-1;e>0;e--)if("TempBasalDuration"==O[e]._type){let r=O[e]["duration (min)"]/60,a=new Date(O[e].timestamp);var pe=a;let t=e;do{if(--t,t>=0&&("TempBasal"==O[t]._type||"PumpSuspend"==O[t]._type)){pe=new Date(O[t].timestamp);break}}while(t>0);if(0==e&&"TempBasalDuration"==O[0]._type&&(pe=new Date,r=O[e]["duration (min)"]/60),(pe-a)/36e5-r>0){Y+=ee(pe,J(a,r))}}var be={TDD:o(N=X+L+Y,5),bolus:o(X,5),temp_basal:o(L,5),scheduled_basal:o(Y,5)},ge=N;P>21?(j=". Bolus insulin: "+X.toPrecision(5)+" U",k=". Temporary basal insulin: "+L.toPrecision(5)+" U",E=". Insulin with scheduled basal rate: "+Y.toPrecision(5)+" U",W=q+(" TDD past 24h is: "+N.toPrecision(5)+" U")+j+k+E,tddReason=", TDD, 24h: "+o(N,1)+", ytd: "+o(Z,1)+", 7d√ò: "+o($,1),console.error(W)):tddReason=", TDD: Not enough pumpData (< 21h)";var fe={},he=new Date;if(G&&(he=new Date(G)),void 0===I||void 0===I.current_basal)return fe.error="Error: could not get current basal rate",fe;var ve=t(I.current_basal,I),Be=ve,_e=new Date;G&&(_e=G);var Me,Se=new Date(e.date),ye=o((_e-Se)/60/1e3,1),xe=e.glucose,Ie=e.noise;Me=n(e.delta,I);var Fe=Math.min(e.delta,e.short_avgdelta),Te=Math.min(e.short_avgdelta,e.long_avgdelta),we=Math.max(e.delta,e.short_avgdelta,e.long_avgdelta);(xe<=10||38===xe||Ie>=3)&&(fe.reason="CGM is calibrating, in ??? state, or noise is high");if(ye>12||ye<-5?fe.reason="If current system time "+_e+" is correct, then BG data is too old. The last BG data was read "+ye+"m ago at "+Se:xe>60&&e.cgmFlatMinutes>89&&(e.last_cal&&e.last_cal<3?fe.reason="CGM was just calibrated":fe.reason="Error: CGM data was suspiciously flat for the past ~"+o(e.cgmFlatMinutes,1)+"m"),xe<=10||38===xe||Ie>=3||ye>12||ye<-5||xe>60&&e.cgmFlatMinutes>89)return r.rate>Be?(fe.reason+=". Replacing high temp basal of "+r.rate+" with neutral temp of "+Be,fe.deliverAt=he,fe.temp="absolute",fe.duration=30,fe.rate=Be,fe):0===r.rate&&r.duration>30?(fe.reason+=". Shortening "+r.duration+"m long zero temp to 30m. ",fe.deliverAt=he,fe.temp="absolute",fe.duration=30,fe.rate=0,fe):(fe.reason+=". Temp "+r.rate+" <= current basal "+o(Be,2)+"U/hr; doing nothing. ",fe);var Ce,De,Ge,Oe,Re=I.max_iob;if(void 0!==I.min_bg&&(De=I.min_bg),void 0!==I.max_bg&&(Ge=I.max_bg),void 0!==I.enableSMB_high_bg_target&&(Oe=I.enableSMB_high_bg_target),void 0===I.min_bg||void 0===I.max_bg)return fe.error="Error: could not determine target_bg. ",fe;Ce=(I.min_bg+I.max_bg)/2;var Ue="",Ae=I.exercise_mode||I.high_temptarget_raises_sensitivity,Pe=100,Ee=160;if(I.half_basal_exercise_target&&(Ee=I.half_basal_exercise_target),A.isEnabled&&A.hbt!=Ee&&(Ee=A.hbt),Ae&&I.temptargetSet&&Ce>Pe||I.low_temptarget_lowers_sensitivity&&I.temptargetSet&&Ce<Pe){var je=Ee-Pe;sensitivityRatio=je*(je+Ce-Pe)<=0?I.autosens_max:je/(je+Ce-Pe),sensitivityRatio=Math.min(sensitivityRatio,I.autosens_max),sensitivityRatio=o(sensitivityRatio,2),Ue="from TT modifier",f+=", Ratio TT: "+sensitivityRatio,process.stderr.write("Sensitivity ratio set to "+sensitivityRatio+" based on temp target of "+Ce+"; ")}else void 0!==F&&F&&(sensitivityRatio=F.ratio,Ue="from Autosens",process.stderr.write("Autosens ratio: "+sensitivityRatio+"; "));if(sensitivityRatio&&(Be=I.current_basal*sensitivityRatio,(Be=t(Be,I))!==ve?process.stderr.write("Adjusting basal from "+ve+" to "+Be+"; "):process.stderr.write("Basal unchanged: "+Be+"; ")),I.temptargetSet);else if(void 0!==F&&F&&(I.sensitivity_raises_target&&F.ratio<1||I.resistance_lowers_target&&F.ratio>1)){De=o((De-60)/F.ratio)+60,Ge=o((Ge-60)/F.ratio)+60;var ke=o((Ce-60)/F.ratio)+60;Ce===(ke=Math.max(80,ke))?process.stderr.write("target_bg unchanged: "+ke+"; "):process.stderr.write("target_bg from "+Ce+" to "+ke+"; "),Ce=ke}var qe=200,We=200,ze=200;if(e.noise>=2){var Ne=Math.max(1.1,I.noisyCGMTargetMultiplier);Math.min(250,I.maxRaw);qe=o(Math.min(200,De*Ne)),We=o(Math.min(200,Ce*Ne)),ze=o(Math.min(200,Ge*Ne)),process.stderr.write("Raising target_bg for noisy / raw CGM data, from "+Ce+" to "+We+"; "),De=qe,Ce=We,Ge=ze}var Le=De-.5*(De-40),Xe=o(I.sens,1),Ye=I.sens;void 0!==F&&F&&((Ye=o(Ye=I.sens/sensitivityRatio,1))!==Xe?process.stderr.write("ISF from "+n(Xe,I)+" to "+n(Ye,I)):process.stderr.write("ISF unchanged: "+n(Ye,I))),console.error("CR:"+I.carb_ratio),console.error("----------------------------------"),console.error(" start autoISF"),console.error("----------------------------------");var He=!0,Ze=!1,$e=r.rate,Je=I.b30_duration,Ke=Je+1;if(console.error("B30 enabled: "+I.use_B30),I.use_B30&&I.use_autoisf){var Qe=I.iTime_Start_Bolus,Ve=I.iTime_target,er=I.b30_upperBG,rr=I.b30_upperdelta,ar=I.b30_factor,tr=!1;I.temptargetSet&&(tr=!0);var or=ie;0==or&&(or=1);var nr=ne;console.error("B30 last bolus above limit of "+Qe+"U was "+nr+"U, "+or+"m ago"),nr>=Qe&&or<=Je&&tr&&Ce==Ve&&(Ke=or,Ze=!0,console.error("B30 iTime is running : "+Ke+"m because manual bolus ("+nr+") >= Minimum Start Bolus size ("+Qe+") and EatingSoon TT set at "+n(Ve,I))),console.error("B30 Activation: "+Ze),console.error("B30 TTset: "+tr+", at "+Ce+", last Bolus of "+nr+"U, "+or+"m ago. iTime remaining: "+(Je-Ke)+"m."),Ze&&(e.delta<=rr&&xe<er&&(He=!1),Ke<=Je&&($e=t(Be*ar,I),h="AIMI B30, Temp "+$e+"U/hr for "+(Je-Ke)+"m, "))}var ir=function(e,r,a){if(e.use_autoisf&&e.iob_threshold>0&&e.iob_threshold<r[0].iob)return s=", autoISF-SMB disabled:, IOB: "+o(r[0].iob,2)+", > threshold: "+e.iob_threshold+", maxIOB: "+e.max_iob,console.error(s),"iobTH";if(!a)return s=", autoISF-SMB disabled:, B30 running","AIMI B30";var t=n(e.min_bg,e);return e.use_autoisf&&e.temptargetSet&&e.enableSMB_EvenOn_OddOff||e.use_autoisf&&e.min_bg==e.max_bg&&e.enableSMB_EvenOn_OddOff_always?(e.temptargetSet?msgType="TempTarget ":msgType="profile target ","mmol/L"==e.out_units?(evenTarget=o(10*t,0)%2==0,msgUnits=" has ",msgTail=" decimal"):(evenTarget=t%2==0,msgUnits=" is ",msgTail=" number"),evenTarget?msgEven="even":msgEven="odd",evenTarget?(console.error("SMB enabled - "+msgType+t+msgUnits+msgEven+msgTail),e.temptargetSet&&t<100?(console.error("Full Loop enabled, SMB enforced"),s=", autoISF-SMB enabled:, even TT","enforced"):(s=", autoISF-SMB enabled:, even Target","enabled")):(console.error("SMB disabled - "+msgType+t+msgUnits+msgEven+msgTail),s=", autoISF-SMB disabled:, odd Target","blocked")):"oref"}(I,a,He),sr=!0;if(C&&"oref"!=ir?("blocked"!=ir&&"AIMI B30"!=ir||(sr=!1),console.error("loopSMB function overriden with autoISF target toggle, enableSMB = "+sr)):(sr=function(e,r,a,t,o,i){return r?!e.allowSMB_with_high_temptarget&&e.temptargetSet&&o>100?(console.error("SMB disabled due to high temptarget of "+o),!1):!0===a.bwFound&&!1===e.A52_risk_enable?(console.error("SMB disabled due to Bolus Wizard activity in the last 6 hours."),!1):!0===e.enableSMB_always?(a.bwFound?console.error("Warning: SMB enabled within 6h of using Bolus Wizard: be sure to easy bolus 30s before using Bolus Wizard"):console.error("SMB enabled due to enableSMB_always"),!0):!0===e.enableSMB_with_COB&&a.mealCOB?(a.bwCarbs?console.error("Warning: SMB enabled with Bolus Wizard carbs: be sure to easy bolus 30s before using Bolus Wizard"):console.error("SMB enabled for COB of",a.mealCOB),!0):!0===e.enableSMB_after_carbs&&a.carbs?(a.bwCarbs?console.error("Warning: SMB enabled with Bolus Wizard carbs: be sure to easy bolus 30s before using Bolus Wizard"):console.error("SMB enabled for 6h after carb entry"),!0):!0===e.enableSMB_with_temptarget&&e.temptargetSet&&o<100?(a.bwFound?console.error("Warning: SMB enabled within 6h of using Bolus Wizard: be sure to easy bolus 30s before using Bolus Wizard"):console.error("SMB enabled for temptarget of",n(o,e)),console.error("SMB enabled for temptargets with "+n(o,e)),!0):!0===e.enableSMB_high_bg&&null!==i&&t>=i?(console.error("Checking BG to see if High for SMB enablement."),console.error("Current BG",t," | High BG ",i),a.bwFound?console.error("Warning: High BG SMB enabled within 6h of using Bolus Wizard: be sure to easy bolus 30s before using Bolus Wizard"):console.error("High BG detected. Enabling SMB."),!0):(console.error("SMB disabled (no enableSMB preferences active or no condition satisfied)"),!1):(console.error("SMB disabled (!microBolusAllowed)"),!1)}(I,C,T,xe,Ce,Oe),console.error("loopSMB function returns enableSMB = "+sr)),Ye=function(e,r,a,t,f,h,I,F,T,w,C,D){if(!t.use_autoisf)return console.error("autoISF disabled in Preferences"),i+=", autoISF, disabled",e;if(t.autoISF_off_Sport&&(t.high_temptarget_raises_sensitivity||t.exercise_mode)&&t.temptargetSet&&a>D)return console.error("autoISF disabled due to exercise"),i+=", autoISF, disabled (exercise)",e;const G=f.dura_p,O=f.delta_pl,R=f.delta_pn,U=f.r_squ,A=f.bg_acceleration,P=f.a_0,E=f.a_1,j=f.a_2,k=f.dura_ISF_minutes,q=f.dura_ISF_average;var W=t.autoISF_min,z=t.autoISF_max,N=!1,L=e,X=a+10-q,Y=f.pp_debug;if("bg_acceleration: "+o(A,3)+", PF-minutes: "+G+", PF-corr: "+o(U,4)+", PF-nextDelta: "+n(R,t)+", PF-lastDelta: "+n(O,t)+", regular Delta: "+n(f.delta,t),console.error(Y),t.enable_BG_acceleration){var H=U;if(0!=j&&H>=.9){var Z=-E/2/j*5,$=o(P-Z*Z/25*j,1);(Z=o(Z,1))>0&&A<0?(p="predicts a Max of "+n($,t)+", in about "+Math.abs(Z)+"min",console.error("Parabolic fit "+p)):Z>0&&A>0?(p="predicts a Min of "+n($,t)+", in about "+Math.abs(Z)+"min",console.error("Parabolic fit "+p)):Z<0&&A<0?(p="saw Max of "+n($,t)+", about "+Math.abs(Z)+"min ago",console.error("Parabolic fit "+p)):Z<0&&A>0&&(p="saw Min of "+n($,t)+", about "+Math.abs(Z)+"min ago",console.error("Parabolic fit "+p))}if(H<.9)p="acce_ISF by-passed, as correlation, "+o(H,2)+", is too low",console.error("Parabolic fit "+p),d+=", Parabolic Fit, "+p;else{var J=10*(H-.9),K=1,Q=1;f.glucose<t.target_bg?A>0?(A>1&&(K=.5),Q=t.bgBrake_ISF_weight):A<0&&(Q=t.bgAccel_ISF_weight):A<0?Q=t.bgBrake_ISF_weight:A>0&&(Q=t.bgAccel_ISF_weight),(v=1+A*K*Q*J)<0&&(v=.1),console.error(d+"acce_ISF adaptation is "+o(v,2)),1!=v&&(N=!0,d+=", Parabolic Fit, "+p+", acce-ISF Ratio: "+o(v,2))}}else console.error("autoISF BG accelertion adaption disabled in Preferences");i+=s+d+", autoISF",B=1+y(100-X,t,"bg"),console.error("bg_ISF adaptation is "+o(B,2));var V=1,ee=1;if(B<1)return V=Math.min(B,v),v>1?(c="bg-ISF adaptation lifted to "+o(V=B*v,2)+", as BG accelerates already",console.error(c),i+=", bg-ISF Ratio: "+o(V,2)+"(accel.)"):i+=", bg-ISF Ratio: "+o(V,2)+"(minimal)",ee=x(V,W,z,T,r,t,C,a,D),L=Math.min(720,o(t.sens/ee,1)),i+=", bg-ISF Ratio: "+o(ee,2),L;B>1&&(N=!0,i+=", bg-ISF Ratio: "+o(B,2));var re=f.delta;t.enable_pp_ISF_always||t.pp_ISF_hours>=(I-h.lastCarbTime)/1e3/3600?deltaType="pp":deltaType="delta",X>0?console.error(deltaType+"_ISF adaptation by-passed as average glucose < "+a+"+10"):f.short_avgdelta<0?console.error(deltaType+"_ISF adaptation by-passed as no rise or too short lived"):"pp"==deltaType?(M=1+Math.max(0,re*t.pp_ISF_weight),console.error("pp_ISF adaptation is "+o(M,2)),u=", pp-ISF Ratio: "+o(M,2),1!=M&&(N=!0)):(_=y(re,t,"delta"),X>-20&&(_*=.5),_=1+_,console.error("delta_ISF adaptation is "+o(_,2)),m=", Œî-ISF Ratio: "+o(_,2),1!=_&&(N=!0));var ae=t.dura_ISF_weight;h.mealCOB>0&&!t.enableautoisf_with_COB?console.error("dura_ISF by-passed; preferences disabled mealCOB of "+o(h.mealCOB,1)):k<10?console.error("dura_ISF by-passed; BG is only "+k+"m at level "+q):q<=a?console.error("dura_ISF by-passed; avg. glucose "+q+" below target "+n(a,t)):(S+=k/60*(ae/a)*(q-a),N=!0,l=", Duration: "+k+", Avg: "+n(q,t)+", dura-ISF Ratio: "+o(S,2),console.error("dura_ISF adaptation is "+o(S,2)+" because ISF "+e+" did not do it for "+o(k,1)+"m"));return N?(V=Math.max(S,B,_,v,M),console.error("autoISF adaption ratios:"),console.error("  dura "+o(S,2)),console.error("  bg "+o(B,2)),console.error("  delta "+o(_,2)),console.error("  pp "+o(M,2)),console.error("  accel "+o(v,2)),v<1&&(c="strongest ISF factor "+o(V,2)+" weakened to "+o(V*v,2)+" as bg decelerates already",console.error(c),V*=v),ee=x(V,W,z,T,r,t,C,a,D),L=o(t.sens/ee,1),i+=u+m+l+", final Ratio: "+o(ee,2)+g+b+", final ISF: "+n(t.sens,t)+"‚Üí"+n(L,t),L):(i+=", not modified",console.error("autoISF does not modify"),L)}(Ye,Ue,Ce,I,e,T,G,0,sensitivityRatio,0,Ae,Pe),console.error("----------------------------------"),console.error(" end autoISF"),console.error("----------------------------------"),void 0===a)return fe.error="Error: iob_data undefined. ",fe;var lr,ur=a;if(a.length,a.length>1&&(a=ur[0]),void 0===a.activity||void 0===a.iob)return fe.error="Error: iob_data missing some property. ",fe;var mr=((lr=void 0!==a.lastTemp?o((new Date(_e).getTime()-a.lastTemp.date)/6e4):0)+r.duration)%30;if(console.error("currenttemp:"+r.rate+" lastTempAge:"+lr+"m, tempModulus:"+mr+"m"),fe.temp="absolute",fe.deliverAt=he,C&&r&&a.lastTemp&&r.rate!==a.lastTemp.rate&&lr>10&&r.duration)return fe.reason="Warning: currenttemp rate "+r.rate+" != lastTemp rate "+a.lastTemp.rate+" from pumphistory; canceling temp",w.setTempBasal(0,0,I,fe,r);if(r&&a.lastTemp&&r.duration>0){var dr=lr-a.lastTemp.duration;if(dr>5&&lr>10)return fe.reason="Warning: currenttemp running but lastTemp from pumphistory ended "+dr+"m ago; canceling temp",w.setTempBasal(0,0,I,fe,r)}var cr=o(-a.activity*Ye*5,2),pr=o(6*(Fe-cr));pr<0&&(pr=o(6*(Te-cr)))<0&&(pr=o(6*(e.long_avgdelta-cr)));var br=xe,gr=(br=a.iob>0?o(xe-a.iob*Ye):o(xe-a.iob*Math.min(Ye,I.sens)))+pr;if(void 0===gr||isNaN(gr))return fe.error="Error: could not calculate eventualBG. Sensitivity: "+Ye+" Deviation: "+pr,fe;var fr=function(e,r,a){return o(a+(e-r)/24,1)}(Ce,gr,cr);fe={temp:"absolute",bg:n(xe,I),tick:Me,eventualBG:gr,insulinReq:0,reservoir:D,deliverAt:he,sensitivityRatio,TDD:ge,insulin:be};var hr=[],vr=[],Br=[],_r=[];hr.push(xe),vr.push(xe),_r.push(xe),Br.push(xe);var Mr=I.enableUAM,Sr=0,yr=0;Sr=o(Fe-cr,1);var xr=o(Fe-cr,1);csf=Ye/I.carb_ratio,console.error("profile.sens:"+n(I.sens,I)+", sens:"+n(Ye,I)+", CSF:"+o(csf,1));var Ir=o(30*csf*5/60,1);Sr>Ir&&(console.error("Limiting carb impact from "+Sr+" to "+Ir+"mg/dL/5m (30g/h)"),Sr=Ir);var Fr=3;sensitivityRatio&&(Fr/=sensitivityRatio);var Tr=Fr;if(T.carbs){Fr=Math.max(Fr,T.mealCOB/20);var wr=o((new Date(_e).getTime()-T.lastCarbTime)/6e4),Cr=(T.carbs-T.mealCOB)/T.carbs;Tr=o(Tr=Fr+1.5*wr/60,1),console.error("Last carbs "+wr+" minutes ago; remainingCATime:"+Tr+"hours; "+o(100*Cr)+"% carbs absorbed")}var Dr=Math.max(0,Sr/5*60*Tr/2)/csf,Gr=90,Or=1;I.remainingCarbsCap&&(Gr=Math.min(90,I.remainingCarbsCap)),I.remainingCarbsFraction&&(Or=Math.min(1,I.remainingCarbsFraction));var Rr=1-Or,Ur=Math.max(0,T.mealCOB-Dr-T.carbs*Rr),Ar=(Ur=Math.min(Gr,Ur))*csf*5/60/(Tr/2),Pr=o(T.slopeFromMaxDeviation,2),Er=o(T.slopeFromMinDeviation,2),jr=Math.min(Pr,-Er/3),kr=0;0===Sr?yr=0:!0===I.floating_carbs?(yr=Math.min(60*Tr/5/2,Math.max(0,T.carbs*csf/Sr)),kr=Math.min(60*Tr/5/2,Math.max(0,T.mealCOB*csf/Sr)),T.carbs>0&&(i+=", Floating Carbs:, CID: "+o(yr,1)+", MealCarbs: "+o(T.carbs,1)+", Not Floating:, CID: "+o(kr,1)+", MealCOB: "+o(T.mealCOB,1),console.error("Floating Carbs CID: "+o(yr,1)+" / MealCarbs: "+o(T.carbs,1)+" vs. Not Floating:"+o(kr,1)+" / MealCOB:"+o(T.mealCOB,1)))):yr=Math.min(60*Tr/5/2,Math.max(0,T.mealCOB*csf/Sr)),console.error("Carb Impact:"+Sr+"mg/dL per 5m; CI Duration:"+o(5*yr/60*2,1)+"hours; remaining CI ("+o(Tr/2,2)+"h peak):",o(Ar,1)+"mg/dL per 5m");var qr,Wr,zr,Nr,Lr,Xr=999,Yr=999,Hr=999,Zr=xe,$r=999,Jr=999,Kr=999,Qr=999,Vr=gr,ea=xe,ra=xe,aa=0,ta=[],oa=[];try{ur.forEach((function(e){var r=o(-e.activity*Ye*5,2),a=o(-e.iobWithZeroTemp.activity*Ye*5,2),t=Sr*(1-Math.min(1,vr.length/12));Vr=vr[vr.length-1]+r+t;var n=_r[_r.length-1]+a,i=Math.max(0,Math.max(0,Sr)*(1-hr.length/Math.max(2*yr,1))),s=Math.min(hr.length,12*Tr-hr.length),l=Math.max(0,s/(Tr/2*12)*Ar);i+l,ta.push(o(l,0)),oa.push(o(i,0)),COBpredBG=hr[hr.length-1]+r+Math.min(0,t)+i+l;var u=Math.max(0,xr+Br.length*jr),m=Math.max(0,xr*(1-Br.length/Math.max(36,1))),d=Math.min(u,m);d>0&&(aa=o(5*(Br.length+1)/60,1)),UAMpredBG=Br[Br.length-1]+r+Math.min(0,t)+d,vr.length<48&&vr.push(Vr),hr.length<48&&hr.push(COBpredBG),Br.length<48&&Br.push(UAMpredBG),_r.length<48&&_r.push(n),COBpredBG<$r&&($r=o(COBpredBG)),UAMpredBG<Jr&&(Jr=o(UAMpredBG)),Vr<Kr&&(Kr=o(Vr)),n<Qr&&(Qr=o(n));vr.length>18&&Vr<Xr&&(Xr=o(Vr)),Vr>ea&&(ea=Vr),(yr||Ar>0)&&hr.length>18&&COBpredBG<Yr&&(Yr=o(COBpredBG)),(yr||Ar>0)&&COBpredBG>ea&&(ra=COBpredBG),Mr&&Br.length>12&&UAMpredBG<Hr&&(Hr=o(UAMpredBG)),Mr&&UAMpredBG>ea&&UAMpredBG}))}catch(e){console.error("Problem with iobArray.  Optional feature Advanced Meal Assist disabled")}fe.predBGs={},vr.forEach((function(e,r,a){a[r]=o(Math.min(401,Math.max(39,e)))}));for(var na=vr.length-1;na>12&&vr[na-1]===vr[na];na--)vr.pop();for(fe.predBGs.IOB=vr,zr=o(vr[vr.length-1]),_r.forEach((function(e,r,a){a[r]=o(Math.min(401,Math.max(39,e)))})),na=_r.length-1;na>6&&!(_r[na-1]>=_r[na]||_r[na]<=Ce);na--)_r.pop();if(fe.predBGs.ZT=_r,o(_r[_r.length-1]),T.mealCOB>0&&(Sr>0||Ar>0)){for(hr.forEach((function(e,r,a){a[r]=o(Math.min(401,Math.max(39,e)))})),na=hr.length-1;na>12&&hr[na-1]===hr[na];na--)hr.pop();fe.predBGs.COB=hr,Nr=o(hr[hr.length-1]),gr=Math.max(gr,o(hr[hr.length-1]))}if(Sr>0||Ar>0){if(Mr){for(Br.forEach((function(e,r,a){a[r]=o(Math.min(401,Math.max(39,e)))})),na=Br.length-1;na>12&&Br[na-1]===Br[na];na--)Br.pop();fe.predBGs.UAM=Br,Lr=o(Br[Br.length-1]),Br[Br.length-1]&&(gr=Math.max(gr,o(Br[Br.length-1])))}fe.eventualBG=gr}console.error("UAM Impact:"+xr+"mg/dL per 5m; UAM Duration:"+aa+"hours"),Xr=Math.max(39,Xr),Yr=Math.max(39,Yr),Hr=Math.max(39,Hr),qr=o(Xr);var ia=T.mealCOB/T.carbs;Wr=o(Hr<999&&Yr<999?(1-ia)*UAMpredBG+ia*COBpredBG:Yr<999?(Vr+COBpredBG)/2:Hr<999?(Vr+UAMpredBG)/2:Vr),Qr>Wr&&(Wr=Qr),Zr=o(Zr=yr||Ar>0?Mr?ia*$r+(1-ia)*Jr:$r:Mr?Jr:Kr);var sa=Hr;if(Qr<Le)sa=(Hr+Qr)/2;else if(Qr<Ce){var la=(Qr-Le)/(Ce-Le);sa=(Hr+(Hr*la+Qr*(1-la)))/2}else Qr>Hr&&(sa=(Hr+Qr)/2);if(sa=o(sa),T.carbs)if(!Mr&&Yr<999)qr=o(Math.max(Xr,Yr));else if(Yr<999){var ua=ia*Yr+(1-ia)*sa;qr=o(Math.max(Xr,Yr,ua))}else qr=Mr?sa:Zr;else Mr&&(qr=o(Math.max(Xr,sa)));qr=Math.min(qr,Wr),process.stderr.write("minPredBG: "+n(qr,I)+" minIOBPredBG: "+n(Xr,I)+" minZTGuardBG: "+n(Qr,I)),Yr<999&&process.stderr.write(" minCOBPredBG: "+n(Yr,I)),Hr<999&&process.stderr.write(" minUAMPredBG: "+n(Hr,I)),console.error(" avgPredBG:"+n(Wr,I)+" COB/Carbs:"+T.mealCOB+"/"+T.carbs),ra>xe&&(qr=Math.min(qr,ra)),fe.COB=T.mealCOB,fe.IOB=a.iob,fe.BGI=n(cr,I),fe.deviation=n(pr,I),fe.dura_ISFratio=o(S,2),fe.bg_ISFratio=o(B,2),fe.delta_ISFratio=o(_,2),fe.pp_ISFratio=o(M,2),fe.acce_ISFratio=o(v,2),fe.auto_ISFratio=o(I.sens/Ye,2),fe.ISF=n(Ye,I),fe.CR=o(I.carb_ratio,2),fe.TDD=o(ge,1),fe.TDDytd=o(Z,1),fe.TDD7d=o($,1),fe.target_bg=n(Ce,I);var ma=function(e,r,a,t){if(!e.use_autoisf)return console.error("autoISF disabled, don't adjust SMB Delivery Ratio"),.5;var n=e.smb_delivery_ratio_bg_range;n<10&&(n/=.0555);var i=e.smb_delivery_ratio,s=Math.min(e.smb_delivery_ratio_min,e.smb_delivery_ratio_max),l=Math.max(e.smb_delivery_ratio_min,e.smb_delivery_ratio_max),u=a+e.smb_delivery_ratio_bg_range,m=i;return n>0&&(m=s+(l-s)*(r-a)/n,m=Math.max(s,Math.min(l,m))),"enforced"==t?(console.error("SMB delivery ratio set to "+o(Math.max(i,m),2)+" as max of fixed and interpolated values"),Math.max(i,m)):0==n?(console.error("SMB delivery ratio set to fixed value "+o(i,2)),i):r<=a?(console.error("SMB delivery ratio limited by minimum value "+o(s,2)),s):r>=u?(console.error("SMB delivery ratio limited by maximum value "+o(l,2)),l):(console.error("SMB delivery ratio set to interpolated value "+o(m,2)),m)}(I,xe,Ce,ir);fe.SMBratio=o(ma,2);var da="SMB Del.Ratio:, "+o(ma,2);fe.reason=h+da+f+i+", Standard, COB: "+fe.COB+", Dev: "+fe.deviation+", BGI: "+fe.BGI+", ISF: "+fe.ISF+", CR: "+fe.CR+", Target: "+fe.target_bg+", minPredBG "+n(qr,I)+", minGuardBG "+n(Zr,I)+", IOBpredBG "+n(zr,I),Nr>0&&(fe.reason+=", COBpredBG "+n(Nr,I)),Lr>0&&(fe.reason+=", UAMpredBG "+n(Lr,I)),fe.reason+=tddReason,fe.reason+="; ";var ca=br;ca<40&&(ca=Math.min(Zr,ca));var pa=Le-ca,ba=240,ga=240;if(T.mealCOB>0&&(Sr>0||Ar>0)){for(na=0;na<hr.length;na++)if(hr[na]<De){ba=5*na;break}for(na=0;na<hr.length;na++)if(hr[na]<Le){ga=5*na;break}}else{for(na=0;na<vr.length;na++)if(vr[na]<De){ba=5*na;break}for(na=0;na<vr.length;na++)if(vr[na]<Le){ga=5*na;break}}sr&&Zr<Le&&(console.error("minGuardBG "+n(Zr,I)+" projected below "+n(Le,I)+" - disabling SMB"),sr=!1);var fa=.2;void 0!==I.maxDelta_bg_threshold&&(fa=Math.min(I.maxDelta_bg_threshold,.4),console.error("maxDelta threshold for BG-Jump to allow SMB's set to: "+100*fa+"%")),we>fa*xe&&(console.error("maxDelta "+n(we,I)+" > "+100*fa+"% of BG "+n(xe,I)+" - disabling SMB"),fe.reason+="maxDelta "+n(we,I)+" > "+100*fa+"% of BG "+n(xe,I)+" - SMB disabled!, ",sr=!1),console.error("BG projected to remain above "+n(De,I)+" for "+ba+"minutes"),(ga<240||ba<60)&&console.error("BG projected to remain above "+n(Le,I)+" for "+ga+"minutes");var ha=ga,va=I.current_basal*Ye*ha/60,Ba=Math.max(0,T.mealCOB-.25*T.carbs),_a=(pa-va)/csf-Ba;if(va=o(va),_a=o(_a),console.error("naive_eventualBG: "+n(br,I)+", bgUndershoot: "+n(pa,I)+", zeroTempDuration: "+ha+", zeroTempEffect: "+va+", carbsReq: "+_a),"Could not parse clock data"==T.reason?console.error("carbsReq unknown: Could not parse clock data"):_a>=I.carbsReqThreshold&&ga<=45&&(fe.carbsReq=_a,fe.reason+=_a+" add'l carbs req w/in "+ga+"m; "),Ze&&Ke<=Je)return fe.reason+="setting AIMI B30 Temp "+t($e,I)+"U/hr for "+(Je-Ke)+"m ",fe.temp="absolute",fe.deliverAt=he,fe.duration=Math.min(30,Je-Ke),console.error("Forcing AIMI temp "+$e+"U/hr"),w.setTempBasal($e,30,I,fe,r);var Ma=0;if(xe<Le&&a.iob<20*-I.current_basal/60&&Fe>0&&Fe>fr)fe.reason+="IOB "+a.iob+" < "+o(20*-I.current_basal/60,2),fe.reason+=" and minDelta "+n(Fe,I)+" > expectedDelta "+n(fr,I)+"; ";else if(xe<Le||Zr<Le)return fe.reason+="minGuardBG "+n(Zr,I)+"<"+n(Le,I),Ma=o(60*((pa=Ce-Zr)/Ye)/I.current_basal),Ma=30*o(Ma/30),Ma=Math.min(120,Math.max(30,Ma)),w.setTempBasal(0,Ma,I,fe,r);if(I.skip_neutral_temps&&fe.deliverAt.getMinutes()>=55)return fe.reason+="; Canceling temp at "+fe.deliverAt.getMinutes()+"m past the hour. ",w.setTempBasal(0,0,I,fe,r);var Sa=0,ya=Be;if(gr<De){if(fe.reason+="Eventual BG "+n(gr,I)+" < "+n(De,I),Fe>fr&&Fe>0&&!_a)return br<40?(fe.reason+=", naive_eventualBG < 40. ",w.setTempBasal(0,30,I,fe,r)):(e.delta>Fe?fe.reason+=", but Delta "+n(Me,I)+" > expectedDelta "+n(fr,I):fe.reason+=", but Min. Delta "+Fe.toFixed(2)+" > Exp. Delta "+n(fr,I),r.duration>15&&t(Be,I)===t(r.rate,I)?(fe.reason+=", temp "+r.rate+" ~ req "+Be+"U/hr. ",fe):(fe.reason+="; setting current basal of "+Be+" as temp. ",w.setTempBasal(Be,30,I,fe,r)));Sa=o(Sa=2*Math.min(0,(gr-Ce)/Ye),2);var xa=Math.min(0,(br-Ce)/Ye);if(xa=o(xa,2),Fe<0&&Fe>fr)Sa=o(Sa*(Fe/fr),2);if(ya=t(ya=Be+2*Sa,I),r.duration*(r.rate-Be)/60<Math.min(Sa,xa)-.3*Be)return fe.reason+=", "+r.duration+"m@"+r.rate.toFixed(2)+" is a lot less than needed. ",w.setTempBasal(ya,30,I,fe,r);if(void 0!==r.rate&&r.duration>5&&ya>=.8*r.rate)return fe.reason+=", temp "+r.rate+" ~< req "+ya+"U/hr. ",fe;if(ya<=0){if((Ma=o(60*((pa=Ce-br)/Ye)/I.current_basal))<0?Ma=0:(Ma=30*o(Ma/30),Ma=Math.min(120,Math.max(0,Ma))),Ma>0)return fe.reason+=", setting "+Ma+"m zero temp. ",w.setTempBasal(ya,Ma,I,fe,r)}else fe.reason+=", setting "+ya+"U/hr. ";return w.setTempBasal(ya,30,I,fe,r)}if(Fe<fr&&(!C||!sr))return e.delta<Fe?fe.reason+="Eventual BG "+n(gr,I)+" > "+n(De,I)+" but Delta "+n(Me,I)+" < Exp. Delta "+n(fr,I):fe.reason+="Eventual BG "+n(gr,I)+" > "+n(De,I)+" but Min. Delta "+Fe.toFixed(2)+" < Exp. Delta "+n(fr,I),r.duration>15&&t(Be,I)===t(r.rate,I)?(fe.reason+=", temp "+r.rate+" ~ req "+Be+"U/hr. ",fe):(fe.reason+="; setting current basal of "+Be+" as temp. ",w.setTempBasal(Be,30,I,fe,r));if(Math.min(gr,qr)<Ge&&(!C||!sr))return fe.reason+=n(gr,I)+"-"+n(qr,I)+" in range: no temp required",r.duration>15&&t(Be,I)===t(r.rate,I)?(fe.reason+=", temp "+r.rate+" ~ req "+Be+"U/hr. ",fe):(fe.reason+="; setting current basal of "+Be+" as temp. ",w.setTempBasal(Be,30,I,fe,r));if(gr>=Ge&&(fe.reason+="Eventual BG "+n(gr,I)+" >= "+n(Ge,I)+", "),a.iob>Re)return fe.reason+="IOB "+o(a.iob,2)+" > max_iob "+Re,r.duration>15&&t(Be,I)===t(r.rate,I)?(fe.reason+=", temp "+r.rate+" ~ req "+Be+"U/hr. ",fe):(fe.reason+="; setting current basal of "+Be+" as temp. ",w.setTempBasal(Be,30,I,fe,r));(Sa=o((Math.min(qr,gr)-Ce)/Ye,2))>Re-a.iob&&(fe.reason+="max_iob "+Re+", ",console.error("InsReq",o(Sa,2),"capped at "+o(Re-a.iob,2)+" to not exceed max_iob"),Sa=Re-a.iob),ya=t(ya=Be+2*Sa,I),Sa=o(Sa,3),fe.insulinReq=Sa;var Ia=o((new Date(_e).getTime()-a.lastBolusTime)/6e4,1);if(C&&sr&&xe>Le){var Fa=o(T.mealCOB/I.carb_ratio,3);if(I.use_autoisf)Ta=I.smb_max_range_extension;else{console.error("autoISF disabled, SMB range extension disabled");var Ta=1}Ta>1&&console.error("SMB max range extended from default by factor "+Ta);var wa=0;void 0===I.maxSMBBasalMinutes?(wa=o(Ta*I.current_basal*30/60,1),console.error("profile.maxSMBBasalMinutes undefined: defaulting to 30m")):a.iob>Fa&&a.iob>0?(console.error("IOB",a.iob,"> COB",T.mealCOB+"; mealInsulinReq =",Fa),I.maxUAMSMBBasalMinutes?(console.error("profile.maxUAMSMBBasalMinutes:",I.maxUAMSMBBasalMinutes,"profile.current_basal:",I.current_basal),wa=o(Ta*I.current_basal*I.maxUAMSMBBasalMinutes/60,1)):(console.error("profile.maxUAMSMBBasalMinutes undefined: defaulting to 30m"),wa=o(30*I.current_basal/60,1))):(console.error("profile.maxSMBBasalMinutes:",I.maxSMBBasalMinutes,"profile.current_basal:",I.current_basal),wa=o(Ta*I.current_basal*I.maxSMBBasalMinutes/60,1));var Ca=I.bolus_increment,Da=1/Ca;I.use_autoisf||(console.error("autoISF disabled, don't adjust SMB Delivery Ratio"),ma=.5),ma>.5&&console.error("SMB Delivery Ratio increased from default 0.5 to "+o(ma,2));var Ga=Math.min(Sa*ma,wa);Ga=Math.floor(Ga*Da)/Da,Ma=o(60*((Ce-(br+Xr)/2)/Ye)/I.current_basal),Sa>0&&Ga<Ca&&(Ma=0);var Oa=0;Ma<=0?Ma=0:Ma>=30?(Ma=30*o(Ma/30),Ma=Math.min(60,Math.max(0,Ma))):(Oa=o(Be*Ma/30,2),Ma=30),fe.reason+=" insulinReq "+Sa,Ga>=wa&&(fe.reason+="; maxBolus "+wa),Ma>0&&(fe.reason+="; setting "+Ma+"m low temp of "+Oa+"U/h"),fe.reason+=". ";var Ra=3;I.SMBInterval&&(Ra=Math.min(10,Math.max(1,I.SMBInterval)));var Ua=o(Ra-Ia,0),Aa=o(60*(Ra-Ia),0)%60;if(console.error("naive_eventualBG "+n(br,I)+", "+Ma+"m "+Oa+"U/h temp needed; last bolus "+Ia+"m ago; maxBolus: "+wa),Ia>Ra?Ga>0&&(fe.units=Ga,fe.reason+="Microbolusing "+Ga+"U. "):fe.reason+="Waiting "+Ua+"m "+Aa+"s to microbolus again. ",Ma>0)return fe.rate=Oa,fe.duration=Ma,fe}var Pa=w.getMaxSafeBasal(I);return ya>Pa&&(fe.reason+="adj. req. rate: "+o(ya,2)+" to maxSafeBasal: "+o(Pa,2)+", ",ya=t(Pa,I)),r.duration*(r.rate-Be)/60>=2*Sa?(fe.reason+=r.duration+"m@"+r.rate.toFixed(2)+" > 2 * insulinReq. Setting temp basal of "+ya+"U/hr. ",w.setTempBasal(ya,30,I,fe,r)):void 0===r.duration||0===r.duration?(fe.reason+="no temp, setting "+ya+"U/hr. ",w.setTempBasal(ya,30,I,fe,r)):r.duration>5&&t(ya,I)<=t(r.rate,I)?(fe.reason+="temp "+r.rate+" >~ req "+ya+"U/hr. ",fe):(fe.reason+="temp "+r.rate+"<"+ya+"U/hr. ",w.setTempBasal(ya,30,I,fe,r))}},6880:(e,r,a)=>{var t=a(6654);e.exports=function(e,r){var a=20;void 0!==r&&"string"==typeof r.model&&(t(r.model,"54")||t(r.model,"23"))&&(a=40);return e<1?Math.round(e*a)/a:e<10?Math.round(20*e)/20:Math.round(10*e)/10}},2705:(e,r,a)=>{var t=a(5639).Symbol;e.exports=t},9932:e=>{e.exports=function(e,r){for(var a=-1,t=null==e?0:e.length,o=Array(t);++a<t;)o[a]=r(e[a],a,e);return o}},9750:e=>{e.exports=function(e,r,a){return e==e&&(void 0!==a&&(e=e<=a?e:a),void 0!==r&&(e=e>=r?e:r)),e}},4239:(e,r,a)=>{var t=a(2705),o=a(9607),n=a(2333),i=t?t.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):n(e)}},531:(e,r,a)=>{var t=a(2705),o=a(9932),n=a(1469),i=a(3448),s=t?t.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(r){if("string"==typeof r)return r;if(n(r))return o(r,e)+"";if(i(r))return l?l.call(r):"";var a=r+"";return"0"==a&&1/r==-Infinity?"-0":a}},7561:(e,r,a)=>{var t=a(7990),o=/^\s+/;e.exports=function(e){return e?e.slice(0,t(e)+1).replace(o,""):e}},1957:(e,r,a)=>{var t="object"==typeof a.g&&a.g&&a.g.Object===Object&&a.g;e.exports=t},9607:(e,r,a)=>{var t=a(2705),o=Object.prototype,n=o.hasOwnProperty,i=o.toString,s=t?t.toStringTag:void 0;e.exports=function(e){var r=n.call(e,s),a=e[s];try{e[s]=void 0;var t=!0}catch(e){}var o=i.call(e);return t&&(r?e[s]=a:delete e[s]),o}},2333:e=>{var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},5639:(e,r,a)=>{var t=a(1957),o="object"==typeof self&&self&&self.Object===Object&&self,n=t||o||Function("return this")();e.exports=n},7990:e=>{var r=/\s/;e.exports=function(e){for(var a=e.length;a--&&r.test(e.charAt(a)););return a}},6654:(e,r,a)=>{var t=a(9750),o=a(531),n=a(554),i=a(9833);e.exports=function(e,r,a){e=i(e),r=o(r);var s=e.length,l=a=void 0===a?s:t(n(a),0,s);return(a-=r.length)>=0&&e.slice(a,l)==r}},1469:e=>{var r=Array.isArray;e.exports=r},3218:e=>{e.exports=function(e){var r=typeof e;return null!=e&&("object"==r||"function"==r)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3448:(e,r,a)=>{var t=a(4239),o=a(7005);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==t(e)}},8601:(e,r,a)=>{var t=a(4841),o=1/0;e.exports=function(e){return e?(e=t(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},554:(e,r,a)=>{var t=a(8601);e.exports=function(e){var r=t(e),a=r%1;return r==r?a?r-a:r:0}},4841:(e,r,a)=>{var t=a(7561),o=a(3218),n=a(3448),i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(n(e))return NaN;if(o(e)){var r="function"==typeof e.valueOf?e.valueOf():e;e=o(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=t(e);var a=s.test(e);return a||l.test(e)?u(e.slice(2),a?2:8):i.test(e)?NaN:+e}},9833:(e,r,a)=>{var t=a(531);e.exports=function(e){return null==e?"":t(e)}}},r={};function a(t){var o=r[t];if(void 0!==o)return o.exports;var n=r[t]={exports:{}};return e[t](n,n.exports,a),n.exports}a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var t=a(5546);freeaps_determineBasal=t})();